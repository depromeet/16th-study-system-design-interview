# 2장 - 개략적인 규모 추정
- 메모리는 빠르지만 디스크는 아직 느리다.
- 디스크 탐색은 가능한 피해야 한다.
- 단순한 압축 알고리즘은 빠르다.
- 데이터 전송 전 가능하면 압축해라
- 데이터 센터들 간의 데이터를 주고받는 데에는 시간이 걸린다.

## QPS(Query Per Second) 추정치
- 가정
    - 월간 능동 사용자(MAU) : 3억
    - 50% 사용자가 트위터에 매일 접속
    - 평균적으로 2회의 트윗을 올림.
    - 10%는 미디어가 포함
    - 데이터는 5년 간 보관
- 추정, QPS(Query Per Second) 추정치
    - DAU = 3억 * 50% = 1.5억
    - QPS = 1.5억 * 2 트윗 / 24시간 / 60분 / 60초 = 약 3500
    - 최대 QPS = 2 * QPS =  약 7000
- 미디어 저장을 위한 저장소 요구량
    - 평균 트윗 크기
        - tweet_id에 64바이트
        - 텍스트에 140바이트
        - 미디어에 1MB
    - 미디어 저장소 요구량 : 1.5억 * 2 * 10% * 1MB = 30TB / 일
    - 5년간 미디어 보관을 위한 저장소 요구량 : 30TB * 365일 * 5년 = 55PB

## 팁
- 추정치를 계산할 때엔 정확한 값보다는 사고의 과정이 중요하다.
- 올바른 절차를 밟아가고 문제 해결 능력을 보여줘야함.
- 복잡한 계산은 어느정도 근사치를 활용해서 계산하라.
    - 99987/9.1 같은 경우 100000/10 으로 해버려도 괜찮다.
- 가정을 적어둬라
- kb, mb 같은 단위를 작성해둬라
- QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 같은 추정은 미리 연습해둬라.

## 추가적인 나의 의견
- 실무에서도 중요한 역량이라는 생각이 듦
  - 특정 피크 상황에서 발생할 수 있는 트래픽이나 대비도 해야하기 때문에 개략적인 규모를 추정하는 것도 중요하다고 생각이 듦
  - auto scaling도 만능은 아님.
    - 인스턴스가 준비되는 데에도 시간이 걸리고, 이 지연 시간동안에 문제가 발생할 수 있음.
    - 따라서 개략적인 규모를 예측하고 이를 대비해서 미리 인스턴스를 추가해두는 등의 작업이 필요함.
  - 도움이 되는 지표
    - 회사마다 다름
    - 리퀘스트 요청 건 수를 체크
    - 트랜잭션 수
    - 과거 기록을 참고
      - 작년 명절 등