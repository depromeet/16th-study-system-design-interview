# 3장 - 시스템 설계 면접 공략법
시스템 설계는 두 명의 동료가 모호한 문제를 풀기 위해 협력해 해결책을 찾아내는 과정에 대한 시뮬레이션이다.
- 시스템 설계 면접은 기술적 측면을 평가하는 것 이상이다.
    - 협력에 적합한 사람인지
    - 압박이 심한 상황도 잘 헤쳐 나갈 자질이 있는지
    - 모호한 문제를 건설적으로 해결할 능력이 있는지
    - 좋은 질문을 던질 능력이 있는지
- 부정적인 신호
    - 설계의 순수성에 집착해 타협적 결정(tradeoff)를 고려하지 않아 over-engineering 하지 않았는지 등
    - 시스템 전반의 비용이 올라간다.
    - 완고함
    - 편협함

## 면접을 위한 효과적인 4단계 접근법
### 1단계 문제 이해 및 설계 범위 확정
- 문제를 듣고 생각 없이 바로 답을 내지 말자.
- 요구 사항을 완전히 이해하지 않고 답을 내놓는 행위는 엄청난 부정적 신호다.
- 어려운 문제를 풀고 최종 설계를 바로 내 놓고 싶을 수 있지만, 잘못된 시스템을 설계하게 될 수 있다.
- 이를 위해서 올바른 질문을 하는 것이 중요하다.
    - 적절한 가정
    - 시스템 구축에 필요한 정보
    - 구체적으로 어떤 기능을 만들어야 하는가?
    - 제품의 사용자 수는 얼마나 되는가?
    - 회사의 규모가 얼마나 빨리 커질 것이라 예상하는가?
        - 3달, 6달, 1년 뒤 회사의 규모를 얼마 정도로 예측하는가?
    - 회사가 사용하는 기술 스택은?
    - 설계를 단순화하기 위해 활용할 수 있는 기존 서비스는 어떤 것이 있는가?
- 뉴스 피드 설계 시 피드가 역순으로 설계되어야 하나요? 특별한 정렬 기준이 있나요?
    - 특별한 정렬 기준이 있을 경우 피드에 올라갈 포스트마다 다른 가중치가 부여되어야 하는가?
    - 가까운 친구의 포스트가 사용자 그룹에 올라가는 포스트보다 더 중요하다거나 등
- 요구사항을 이해하고 모호함을 없애는 게 이 단계에서 가장 중요하다.

### 2단계 개략적인 설계안 제시 및 동의 구하기
- 개략적인 설계안을 제시하고 면접관의 동의를 얻는 것이 중요함.
- 면접관과 협력하며 진행하면 좋다.
- 설계안에 대한 최초 청사진을 제시하고 의견을 구하기.
    - 면접관을 팀원처럼 대하고, 함께 설계하기.
- 화이트보드나 종이에 핵심 컴포넌트를 포함하는 다이어그램을 그리기.
    - 클라이언트(모바일/웹), API, 웹 서버, 데이터 저장소, 캐시 CDN, 메시지 큐 등
- 이 설계안이 시스템 규모와 관련된 제약사항들을 만족하는지 개략적으로 계산해보기.
    - 이러한 개략적 추정이 필요한지 면접관에게 미리 물어보기
- API 엔드포인트나 DB 스키마도 보여야하는가?
    - 상황에 따라 다르다.
      -'구글 검색 엔진을 설계하라'

### 3단계 상세 설계
- 달성한 목표
    - 시스템에서 전반적으로 달성해야 할 목표와 기능 범위 확인
    - 전체 설계의 개략적 청사진 마련
    - 해당 청사진에 대한 면접관의 의견 청취
    - 상세 설계에서 집중해야 할 영역들 확인
- 해야할 일
    - 설계 대상 컴포넌트 사이의 우선순위를 면접관과 정해야 함
        - 단축 url 생성기
            - 해시 함수를 구체적으로 설명하는 것을 듣고 싶을 것임
        - 채팅 시스템
            - 지연시간 줄이는 방안
            - 사용자 온/오프라인 상태 표시 등
    - 시간 관리도 주의할 것
        - 불필요한 세부 사항에 너무 많은 시간을 사용하지 말 것
            - 페이스북에서 뉴스 피드 순위를 매기는 알고리즘 등

### 4단계 마무리
- 개선할 곳은 언제나 존재한다는 생각을 갖고 준비하도록 하라
- 만든 설계를 다시 요약해주는 것이 도움이 될 수도 있다.
- 오류(서버 오류, 네트워크 장애 등)가 발생했을 때 무슨 일이 생기는지 따져보라
- 운영 이슈에 대한 논의도 좋다
    - 메트릭 수집, 모니터링, 로그, 어떻게 배포(roll-out)할 것인지 등
- 미래 규모 확장 요구에 대한 대처
- 시간 이슈로 다루지 못 한 세부적 개선 사항을 제안할 수 있다

### 해야할 것
- 질문을 통해 확인하기
- 문제의 요구 사항을 이해하기
- 정답이나 최선의 답은 없다는 것을 명심할 것
    - 스타트 업과 중견 기업의 설계가 같을 리가 없다
- 면접관이 우리의 사고 흐름을 이해할 수 있게 소통하라
- 가능하다면 여러 해법을 함께 제시하라
- 개략적 설계에 면접관이 동의하면 세부 사항을 설명해라
- 중요한 컨포넌트부터 진행해라
- 면접관의 아이디어를 이끌어 내라
- 포기하지 마라

### 하지 말아야 할 것
- 전형적인 면접 문제도 대비하지 않고 면접장에 가지 마라
- 요구사항이나 가정들이 분명하지 않은 상태에서 설계를 제시하지 마라
- 처음부터 특정 컴포넌트의 세부사항을 너무 깊이 설명하지 마라
- 개략적인 설계를 마친 후 세부사항으로 나아가라
- 진행 중 막힐 경우 힌트를 청하기를 주저하지 마라
- 소통을 주저하지마라
- 침묵 속에서 설계를 진행하지 마라
- 설계를 내놓는 순간 면접이 끝난다고 생각하지 마라
- 의견을 일찍, 자주 구하라

### 시간 배분
- 시스템 설계 면접은 보통 45 ~ 1시간 정도로 충분하지 않을 수 있다.
- 대략적인 시간 분배 추정치
    - 1단계 문제 이해 및 설계 범위 확정
        - 3분 ~ 10분
    - 2단계 개략적인 설계안 제시 및 동의 구하기
        - 10분 ~ 15분
    - 3단계 상세 설계
        - 10분 ~ 25분
    - 4단계 마무리
        - 3분 ~ 5분

### 가장 궁금한 능력은?
- 설득과 설명하는 능력이 가장 궁금한 것 같다.
  - 설계를 잘 못 했더라도, 왜 그렇게 했는지 명확한 근거가 있으면 좋을 것 같음.
  - 내가 설계한 게 있다면 그에 따른 이유가 존재할 것임.
    - 무조건적인 수용보다는 자신감 있고 근거 있는 선택을 하면 좋을 것 같음.
    - 