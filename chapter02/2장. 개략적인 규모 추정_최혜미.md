# **2장. 개략적인 규모 추정**

## **1. 개략적인 규모 추정이란?**
- 시스템 설계 시 **성능 및 용량 요구사항**을 예측하는 과정.
- 2의 제곱수, 응답지연, 가용성 등의 기본 개념을 숙지해야 한다.
- 면접에서는 정답보다 **추론 과정과 논리적 사고**가 중요하다.

---

## **2. 2의 제곱수**
- **데이터 크기 및 볼륨 계산**에 사용되는 기본 개념.
- 컴퓨터 시스템에서 2의 제곱수를 기준으로 단위가 결정됨.

| 2의 제곱수  | 근사치        | 이름        | 축약형 |
|------------|-------------|------------|--------|
| 2^10       | 1천         | 1킬로바이트 | 1KB    |
| 2^20       | 100만       | 1메가바이트 | 1MB    |
| 2^30       | 10억        | 1기가바이트 | 1GB    |
| 2^40       | 1조         | 1테라바이트 | 1TB    |
| 2^50       | 1000조      | 1페타바이트 | 1PB    |

---

## **3. 응답지연(latency) 값**
- 시스템 성능을 예측하고 최적화하는 데 도움됨.

### 📌 **응답 시간 비교**
| 연산명                                        | 응답 시간            |
|----------------------------------------------|----------------------|
| L1 캐시 참조                                 | 0.5ns               |
| 분기 예측 오류 (branch mispredict)          | 5ns                 |
| L2 캐시 참조                                 | 7ns                 |
| 뮤텍스 락/언락                               | 100ns               |
| 메모리 참조                                  | 100ns               |
| Zippy로 1KB 압축                             | 10μs                |
| 1Gbps 네트워크로 2KB 전송                     | 20μs                |
| 메모리에서 1MB 순차적으로 읽기                | 250μs               |
| 같은 데이터 센터 내 메시지 왕복              | 0.5ms               |
| 디스크 탐색 (seek)                           | 10ms                |
| 네트워크에서 1MB 데이터 전송                  | 10ms                |
| 디스크에서 1MB 데이터 읽기                   | 30ms                |
| 미국 ↔ 유럽 간 네트워크 왕복 시간            | 150ms               |

### 📌 **결론**
- **메모리는 빠르지만 디스크는 여전히 느리다.**
- **디스크 탐색은 최대한 피하라.**
- **압축 알고리즘은 빠르므로 전송 전에 압축을 고려하라.**
- **데이터 센터 간 전송에는 시간이 걸린다.**

---

## **4. 가용성**
- **고가용성(HA, High Availability)**: 시스템이 중단 없이 지속적으로 운영될 수 있는 능력.
- 100% 가용성은 현실적으로 불가능하므로 99% 이상의 가용률을 목표로 함.

| 가용률      | 하루당 장애시간 | 연간 장애시간 |
|------------|--------------|--------------|
| 99%        | 14.4분       | 3.65일       |
| 99.9%      | 1.44분       | 8.77시간     |
| 99.99%     | 8.64초       | 52.60분      |
| 99.999%    | 864ms        | 5.26분       |

### 📌 **결론**
- 99.9% 가용성(3년 내내 운영하면 약 9시간 다운)은 일반적인 서비스 수준.
- 금융, 클라우드 서비스는 **99.999% 가용성**(1년에 5분 다운) 이상을 요구.

---

## **5. 트위터 QPS와 저장소 요구량 추정**
- **트위터 서비스의 규모를 예측하는 예제.**

### 📌 **가정**
- 월간 활성 사용자(MAU): **3억 명**
- 50%가 매일 사용 → **1.5억 DAU(Daily Active Users)**
- 1인당 평균 **2개 트윗/일**
- 미디어 포함 트윗: **10%**
- 데이터는 **5년간 보관**

### 📌 **QPS(Query Per Second) 계산**
- **QPS = DAU × 트윗 수 / 24시간 / 3600초**
- `1.5억 × 2 / 86400 = 약 3500`
- **최대 QPS**: 피크 타임(2배) 고려 → **7000 QPS**

### 📌 **저장소 요구량 계산**
- **평균 트윗 크기**:
    - tweet_id: **64B**
    - 텍스트: **140B**
    - 미디어(이미지/동영상 포함 시): **1MB**
- **미디어 저장소 요구량**:
    - `1.5억 × 2 × 10% × 1MB = 30TB/일`
    - **5년 보관 시**: `30TB × 365 × 5 = 약 55PB`

---

## **6. 개략적 규모 추정 시 유의할 점**
1. **근사치를 활용한 계산**
    - `99987 / 9.1` 대신 `100,000 / 10`으로 단순화.
2. **가정(Assumptions)을 명확하게 기록**
    - 추정 계산이 합리적인지 검증 가능하도록 함.
3. **단위(Unit)를 반드시 표기**
    - `5`가 **5KB인지, 5MB인지** 명확하게 작성.
4. **QPS, TPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 미리 연습**
    - 면접 전에 **규모 추정 연습**을 해두면 유리함.

---

## **📌 마무리**
- 규모 추정은 **논리적인 사고 과정이 가장 중요**하다.
- 정확한 수치보다 **어떤 근거로 계산했는지**가 평가의 핵심.
- **QPS, 저장소 용량, 서버 수, 네트워크 지연** 등을 계산하는 연습이 필요.
- **메
